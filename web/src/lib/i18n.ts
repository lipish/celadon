/**
 * 中英双语，key 与中文一致便于对照
 */
export type Locale = "zh" | "en";

const messages: Record<Locale, Record<string, string>> = {
  zh: {
    // Shared / Navigation
    appName: "Celadon",
    tagline: "持续交互式开发流程 · Continuous Interactive Dev",
    headline1: "把",
    headline2: "想法",
    headline3: "变成",
    headline4: "可部署的软件",
    subtitle: "提交一个想法，Celadon 自动完成需求澄清、PRD 生成、AI 驱动开发与部署。",
    poweredBy: "Powered by Zene · Planner / Executor / Reflector loop",
    hintInput: "支持中英文描述 · 无需精确规格 · AI 会帮你澄清",
    start: "启动",
    docs: "文档",
    api: "API",
    getStarted: "开始使用",
    recentProjects: "最近项目",
    viewAll: "查看全部",
    continueWork: "继续",
    newIdea: "新想法",
    flowOverview: "流程概览",
    projects: "项目",
    viewRepo: "查看仓库",
    selectProject: "选择项目",
    clarify: "澄清",
    prd: "需求文档",
    dev: "开发",
    deploy: "部署",
    iterate: "迭代",
    stageClarify: "Clarify",
    stagePrd: "PRD",
    stageDev: "Development · Zene",
    stageDeploy: "Deploy",
    stageIterate: "Iterate",
    back: "返回",
    generatePrd: "生成 PRD",
    enterDev: "进入开发",
    startDev: "启动开发",
    starting: "正在启动...",
    noRecentProjects: "暂无历史项目，输入上方想法开始",
    justNow: "刚刚",
    minutesAgo: "分钟前",
    hoursAgo: "小时前",
    clarifyTitle: "需求澄清",
    clarifySubtitle: "与 AI 多轮对话澄清需求",
    prdTitle: "PRD",
    currentProject: "当前项目",
    sections: "章节",
    copyMd: "复制 MD",
    copied: "已复制",
    copy: "复制",
    thinking: "正在思考...",
    loadingChat: "加载对话...",
    requestFailed: "请求失败",
    login: "登录",
    register: "注册",
    logout: "退出登录",
    settings: "系统设置",
    adminConsole: "管理控制台",
    backToIndex: "返回首页",
    systemSettings: "系统设置",
    systemSettingsDesc: "配置 Celadon Studio 的全局参数。此处修改将影响所有用户并立即生效。",
    update: "更新",
    updating: "更新中...",
    updateSuccess: "设置更新成功",
    updateError: "更新失败",
    encrypted: "已加密",
    noSettingsFound: "未找到设置项，正在初始化...",
    authRequired: "需要管理员权限",
    profile: "个人信息",
    language: "语言",
    chinese: "中文",
    english: "English",
    changePassword: "修改密码",
    cancel: "取消",
    confirm: "确认",
    me: "我",
    unknownProject: "未知项目",

    // Authentication
    loginTitle: "登录",
    loginSubtitle: "使用邮箱与密码登录 Celadon",
    registerTitle: "注册",
    registerSubtitle: "创建 Celadon 账号",
    emailLabel: "邮箱",
    passwordLabel: "密码",
    loginButton: "登录",
    registerButton: "注册",
    loggingIn: "登录中...",
    registering: "注册中...",
    noAccount: "还没有账号？",
    hasAccount: "已有账号？",
    loginError: "登录失败",
    registerError: "注册失败",

    // Clarify
    originalIdea: "原始想法",
    noIdea: "（无内容）",
    loadingConversation: "加载对话...",
    thinkingPlaceholder: "Celadon 正在思考...",
    replyPlaceholder: "输入你的回答... (Enter 发送，Shift+Enter 换行)",
    submitHintClarify: "Enter 发送 · Shift+Enter 换行",
    requestError: "请求失败",
    apiError404Db: "接口不存在 (404)，请检查后端是否开启了数据库模式",
    apiError404: "接口不存在 (404)",
    apiErrorInvalidJson: "服务端未返回有效的 JSON 数据",
    pageNotFound: "糟糕！页面未找到",
    returnHome: "返回首页",

    // Project Stages & Status
    CLARIFYING: "澄清中",
    PRD_CONFIRMED: "PRD 已确认",
    DEVELOPING: "开发中",
    TESTING: "测试中",
    DEPLOYING: "部署中",
    DELIVERED: "已交付",
    active: "活跃",
    paused: "已暂停",
    startError: "启动失败",
    standardAccount: "标准账号",
    support: "支持",

    // Landing / Extras
    getStartedButton: "立即开始",
    heroSubtitle: "从想法到代码，Celadon 助你构建专业级的全栈应用",
    waitingListTitle: "加入等待列表",
    waitingListSubtitle: "目前 Celadon 处于内测阶段，请输入邮箱预约。",
    waitingListSuccess: "已加入等待列表，我们会尽快联系你！",
    waitingListEmailPlaceholder: "预约邮箱",
    waitingListSubmit: "预约",
    waitingListError: "加入等待列表失败",
    persistenceTitle: "持久化与技术栈",
    persistenceDesc: "Celadon 会持久化你的所有 PRD、设计稿与代码。基于 Git 的版本管理方案让你随时可以回退到任何一个历史节点。",
    artifactsSaved: "100% 物料已保存",
    gitIntegrated: "Git 已集成",
    terminalTitle: "初始构建成功",
    terminalCommand: "celadon iterate --refine \"增加 Stripe 支付集成\"",
    commitsCount: "次提交",
    executingZene: "正在运行 ZENE...",
    examplesTitle: "精彩范例",
    examplesSubtitle: "看看 Celadon 已经帮助开发者构建了什么",
    saasBillingTitle: "SaaS 账单后台",
    saasBillingDesc: "帮助独立开发者管理 SaaS 订阅与账单的后台管理系统，支持多货币与税率配置",
    aiReviewerTitle: "AI 代码审查",
    aiReviewerDesc: "基于大模型的代码审查工具，自动检测安全漏洞、性能问题和代码规范",
    apiCollabTitle: "API 设计平台",
    apiCollabDesc: "实时协作的 API 设计平台，支持团队共同编写 OpenAPI 3.1 规范",
    viewDetails: "查看详情",
    interactiveLoopTitle: "交互式开发循环",
    interactiveLoopSubtitle: "Celadon 不仅仅是代码生成器。它采用特殊的需求澄清 → PRD → 开发 → 迭代循环，确保每一行代码都符合你的真实意图。",
    loopItem1: "AI 辅助需求对齐",
    loopItem2: "自动生成标准化 PRD",
    loopItem3: "闭环式 AI 代码编写",
    loopItem4: "一键预览与部署",
    processClarify: "需求澄清",
    processPrd: "PRD 生成",
    processDev: "AI 开发",
    processDeploy: "一键部署",
    processIterate: "持续迭代",
    inputPlaceholder1: "一个帮助独立开发者管理 SaaS 订阅的后台系统...",
    inputPlaceholder2: "基于 AI 的代码审查工具，自动检测安全漏洞...",
    inputPlaceholder3: "一个实时协作的 API 设计平台，支持团队共同编写 OpenAPI 规范...",
    inputPlaceholder4: "帮助工程师追踪技术债务并自动生成重构建议的工具...",
    submitHint: " 提交",
    charCount: "字",
    startingBtn: "正在启动...",
    startBtn: "启动",
    coreEngine: "核心引擎",

    // Mock Data
    mockLogReadPrd: "读取 PRD 文档，识别 12 个功能模块...",
    mockLogTaskSplit: "任务分解：[schema] [auth] [api] [stripe] [dashboard]",
    mockLogSchemaInit: "schema.prisma 初始化完成",
    mockLogGeneratingModels: "生成数据模型：User, Subscription, Invoice, Plan...",
    mockLogSchemaWritten: "prisma/schema.prisma 已写入 (89 行)",
    mockLogMigrateDone: "迁移完成：20240118_init",
    mockLogAuthSystem: "构建 NextAuth 认证系统 + JWT 策略...",
    mockLogAuthWritten: "middleware/auth.ts 已写入",
    mockLogAuthCheck: "校验 auth 中间件，发现缺少 rate limiting，触发修复",
    mockLogSecurityWarn: "安全警告：/api 路由未受保护，自动添加中间件",
    mockLogRateLimitWritten: "middleware/rateLimit.ts 已写入",
    mockLogStripeHandler: "构建 Stripe webhook handler...",
    mockLogStripeWritten: "lib/stripe.ts 已写入 (156 行)",
    mockLogBuildApi: "构建 API 路由：/subscriptions, /invoices, /plans...",
    mockLogApiFinish: "Executor 完成 API 层，移交 Planner 确认前端结构",
    mockLogPlanDashboard: "规划 Dashboard 组件树：BillingTable, RevenueChart...",
    mockLogBuildBilling: "构建 BillingTable 组件（虚拟滚动 + 排序）",
    mockLogBillingWritten: "components/BillingTable.tsx 已写入 (312 行)",
    mockLogBuildChart: "构建 RevenueChart (Recharts, 日/月/年视图)...",
    mockLogChartWritten: "components/RevenueChart.tsx 已写入 (201 行)",
    mockLogReflectorReview: "Reflector 审查：BillingTable 缺少 empty state，补充",
    mockLogEmptyStateAdded: "BillingTable empty state 已添加",
    mockLogTsc: "运行 TypeScript 类型检查...",
    mockLogTscPass: "tsc --noEmit 通过，0 错误",
    mockLogEslint: "运行 ESLint...",
    mockLogLintFix: "2 个 warning（unused import），自动修复",
    mockLogLintDone: "Lint 通过，代码质量检查完成",
    mockLogBuildSubCard: "构建 SubscriptionCard 组件...",
    mockLogSubCardWritten: "components/SubscriptionCard.tsx 已写入 (134 行)",
    mockLogIntegrateStripe: "集成 Stripe 计费周期与 webhook 事件处理...",
    mockLogWebhookVerify: "校验：webhook 签名验证逻辑正确，批准",
    mockLogExport: "构建账单导出功能（CSV / PDF）...",
    mockLogExportWritten: "lib/export.ts 已写入 (89 行)",
    mockLogRunningTests: "运行集成测试...",
    mockLogTestsPass: "12/12 测试通过 ✓",
    mockAgentPlanTask: "规划 Dashboard UI 结构，分配前端组件任务",
    mockAgentExecTask: "构建 SubscriptionCard 组件 + CSV 导出",
    mockAgentReflectTask: "等待 Executor 完成，准备代码审查",
    mockAgentIdle: "等待启动开发",
    mockDeployLogReadConfig: "读取部署配置 deploy.config.ts...",
    mockDeployLogVercelConnect: "连接到 Vercel 项目 saas-billing-dashboard...",
    mockDeployLogAuthSuccess: "认证成功，token 有效",
    mockDeployLogNextBuild: "Next.js 14.2 编译中...",
    mockDeployLogCollect: "  ✦ 收集页面和组件...",
    mockDeployLogTscCheck: "  ✦ 运行 TypeScript 类型检查...",
    mockDeployLogTscPass: "  类型检查通过，0 错误",
    mockDeployLogBundle: "  ✦ 打包 JS 模块 (tree-shaking)...",
    mockDeployLogImages: "  ✦ 优化图片资源...",
    mockDeployLogStatic: "  ✦ 生成静态页面 /dashboard, /billing, /settings...",
    mockDeployLogBuildSuccess: "构建成功 · 耗时 23.4s · 产物大小 847 kB",
    mockDeployLogUpload: "上传构建产物到 Vercel CDN...",
    mockDeployLogEdgeNodes: "分配边缘节点：sin1, nrt1, hkg1, sfo1...",
    mockDeployLogEdgeFinish: "构建产物已部署到 4 个边缘节点",
    mockDeployLogEnvInject: "注入环境变量 (Staging)...",
    mockDeployLogEnvFinish: "16 个环境变量已注入",
    mockDeployLogDbMigrate: "数据库迁移完成 (1 个 migration)",
    mockDeployLogHealth: "运行健康检查...",
    mockDeployLogHealthPass: "全部健康检查通过 (3/3)",
    mockDeployLogSsl: "SSL 证书已签发 (Let's Encrypt · 90天)",
    mockDeployLogCdn: "CDN 缓存预热完成 (12个节点)",
    mockDeployLogSuccess: "Staging 部署成功 · https://staging-saas-billing.vercel.app",
    mockStepInstall: "安装依赖",
    mockStepTsc: "类型检查",
    mockStepLint: "代码规范",
    mockStepBuild: "构建产物",
    mockStepUpload: "上传 CDN",
    mockStepMigrate: "数据库迁移",
    mockStepHealth: "健康检查",
    mockStepSsl: "SSL 证书",
    mockStepCdn: "CDN 预热",
    mockHcService: "服务健康",
    mockHcAuth: "认证服务",
    mockHcSub: "订阅 API",
    mockHcDb: "数据库连接",
    filesCount: "个文件",
    linesCount: "行",
    buildPipeline: "构建流水线",
    inProgress: "进行中",
    commits: "提交",

    // Iterate Page
    iterateTitle: "版本迭代",
    iterateSubtitle: "管理项目版本，追踪功能演进",
    startNewIterate: "启动新迭代",
    currentVersion: "当前版本",
    previousVersion: "上一版本",
    initialVersion: "初始版本",
    versionHistory: "版本历史",
    suggestedFeatures: "建议功能",
    reqCollected: "已收集需求",
    totalAdd: "增加",
    totalDel: "删除",
    feature: "功能",
    perf: "性能",
    ux: "体验",
    fix: "修复",

    // More Mock Data
    mockLogIntegrateStripeTask: "集成 Stripe 计费周期 webhook 事件",
    mockLogReviewWebhook: "审查 webhook 签名验证逻辑",
    mockLogWaitCommits: "等待下一批代码提交",
    mockLogAllTasksDone: "所有任务完成，等待部署",
    mockLogEmptyTerminal: "启动开发后将显示",
    mockLogV03Msg: "feat: SubscriptionCard + export lib/export.ts",
    mockIterateMsg: "[迭代]",
    mockDefaultIdea: "SaaS 账单管理后台",
    mockLogSslIssued: "Let's Encrypt 签发",
    mockLogGlobalEdge: "全球边缘节点同步",
    codeChanges: "代码变更",
    versionCompare: "版本对比",
    baseline: "基准",
    current: "当前",
    newFiles: "新增文件",
    modifiedFiles: "修改文件",
    commitCount: "提交次数",
    nextRoundReqs: "下一轮需求",
    nextRoundSubtitle: "描述新需求，或从 AI 建议中选择，然后启动新的澄清 → 开发循环",
    reqsRecorded: "需求已记录",
    continueAdding: "继续添加需求",
    celadonSuggestions: "Celadon 建议",
    basedOnAnalysis: "基于使用数据分析",
    enterClarifyStage: "进入澄清阶段",
    startNewIterateLoop: "启动新迭代循环",
    iterateCount: "迭代次数",
    totalCommits: "总提交",
    onlineTime: "在线时长",
    mockLogNextReqPlaceholder: "例如：用户希望能按日期范围筛选账单，并支持批量导出为 PDF 格式...",
    mockLogConfirmReq: "确认需求",
    mockLogCmdEnterHint: "⌘+Enter 确认",
    mockLogAdded: "增加",
    mockLogDeleted: "删除",
    mockLogFileChanges: "个文件变更",
    mockLogLive: "在线",
    mockLog2hAgo: "2小时前",
    mockLogYesterday: "昨天",
    mockLogPdfExport: "PDF 账单导出",
    mockLogPdfExportDesc: "用户反映需要 PDF 格式账单，适合企业报销场景",
    mockLogDarkMode: "深色模式支持",
    mockLogDarkModeDesc: "主题切换功能，提升长时使用舒适度",
    mockLogVirtualScroll: "账单列表虚拟滚动",
    mockLogVirtualScrollDesc: "数据量超过 1000 条时渲染性能下降，引入 react-virtual",
    mockLogWebhookLog: "Webhook 事件日志",
    mockLogWebhookLogDesc: "记录并展示所有 Stripe webhook 事件，方便排查问题",
    mockLogStripeRefund: "Stripe 退款处理",
    mockLogStripeRefundDesc: "当前退款状态未同步到 Invoice 记录，需修复状态机",
  },
  en: {
    // Shared / Navigation
    appName: "Celadon",
    tagline: "Continuous Interactive Dev",
    headline1: "Turn",
    headline2: "ideas",
    headline3: "into",
    headline4: "deployable software",
    subtitle: "Submit an idea; Celadon handles clarification, PRD, AI-driven development and deployment.",
    poweredBy: "Powered by Zene · Planner / Executor / Reflector loop",
    hintInput: "Describe in any language · No precise spec needed · AI will clarify",
    start: "Start",
    docs: "Docs",
    api: "API",
    getStarted: "Get started",
    recentProjects: "Recent projects",
    viewAll: "View all",
    continueWork: "Continue",
    newIdea: "New idea",
    flowOverview: "Flow overview",
    projects: "Projects",
    viewRepo: "View repo",
    selectProject: "Select project",
    clarify: "Clarify",
    prd: "PRD",
    dev: "Dev",
    deploy: "Deploy",
    iterate: "Iterate",
    stageClarify: "Clarify",
    stagePrd: "PRD",
    stageDev: "Development · Zene",
    stageDeploy: "Deploy",
    stageIterate: "Iterate",
    back: "Back",
    generatePrd: "Generate PRD",
    enterDev: "Enter dev",
    startDev: "Start dev",
    starting: "Starting...",
    noRecentProjects: "No projects yet. Enter an idea above to start.",
    justNow: "just now",
    minutesAgo: "m ago",
    hoursAgo: "h ago",
    clarifyTitle: "Clarify",
    clarifySubtitle: "Multi-turn dialogue with AI",
    prdTitle: "PRD",
    currentProject: "Current project",
    sections: "Sections",
    copyMd: "Copy MD",
    copied: "Copied",
    copy: "Copy",
    thinking: "Thinking...",
    loadingChat: "Loading chat...",
    requestFailed: "Request failed",
    login: "Login",
    register: "Register",
    logout: "Logout",
    settings: "System Settings",
    adminConsole: "Admin Console",
    backToIndex: "Back to Home",
    systemSettings: "System Settings",
    systemSettingsDesc: "Configure global parameters for Celadon Studio. Changes take effect immediately.",
    update: "Update",
    updating: "Updating...",
    updateSuccess: "Settings updated",
    updateError: "Update failed",
    encrypted: "Encrypted",
    noSettingsFound: "No settings found, initializing...",
    authRequired: "Admin privileges required",
    profile: "Profile",
    language: "Language",
    chinese: "Chinese",
    english: "English",
    changePassword: "Change Password",
    cancel: "Cancel",
    confirm: "Confirm",
    me: "me",
    unknownProject: "Unknown Project",

    // Authentication
    loginTitle: "Login",
    loginSubtitle: "Login to Celadon with email and password",
    registerTitle: "Register",
    registerSubtitle: "Create a Celadon account",
    emailLabel: "Email",
    passwordLabel: "Password",
    loginButton: "Login",
    registerButton: "Register",
    loggingIn: "Logging in...",
    registering: "Registering...",
    noAccount: "No account yet?",
    hasAccount: "Already have an account?",
    loginError: "Login failed",
    registerError: "Registration failed",

    // Clarify
    originalIdea: "Original Idea",
    noIdea: "(No content)",
    loadingConversation: "Loading conversation...",
    thinkingPlaceholder: "Celadon is thinking...",
    replyPlaceholder: "Enter your answer... (Enter to send, Shift+Enter for new line)",
    submitHintClarify: "Enter to send · Shift+Enter for new line",
    requestError: "Request failed",
    apiError404Db: "Endpoint not found (404). Please check if backend is in database mode.",
    apiError404: "Endpoint not found (404)",
    apiErrorInvalidJson: "Server did not return valid JSON data",
    pageNotFound: "Oops! Page not found",
    returnHome: "Return to Home",

    // Project Stages & Status
    CLARIFYING: "Clarifying",
    PRD_CONFIRMED: "PRD Confirmed",
    DEVELOPING: "Developing",
    TESTING: "Testing",
    DEPLOYING: "Deploying",
    DELIVERED: "Delivered",
    active: "Active",
    paused: "Paused",
    startError: "Start failed",
    standardAccount: "Standard Account",
    support: "Support",

    // Landing / Extras
    getStartedButton: "Get Started",
    heroSubtitle: "From idea to code, Celadon helps you build professional full-stack apps",
    waitingListTitle: "Join Waiting List",
    waitingListSubtitle: "Celadon is currently in beta. Enter your email to join the waitlist.",
    waitingListSuccess: "You've joined the waitlist, we'll contact you soon!",
    waitingListEmailPlaceholder: "Waitlist Email",
    waitingListSubmit: "Join",
    waitingListError: "Failed to join waiting list",
    persistenceTitle: "Persistence & Tech Stack",
    persistenceDesc: "Celadon persists all your PRDs, designs, and code. Git-based versioning allows you to roll back to any historical point.",
    artifactsSaved: "100% Artifacts Saved",
    gitIntegrated: "Git Integrated",
    terminalTitle: "Initial Deployment Successful",
    terminalCommand: "celadon iterate --refine \"Add Stripe integration\"",
    commitsCount: "commits",
    executingZene: "EXECUTING ZENE...",
    examplesTitle: "Featured Examples",
    examplesSubtitle: "See what Celadon has helped developers build",
    saasBillingTitle: "SaaS Billing Dashboard",
    saasBillingDesc: "Management system for SaaS subscriptions and billing, supports multi-currency and tax rates",
    aiReviewerTitle: "AI Code Reviewer",
    aiReviewerDesc: "LLM-based code review tool, automatically detects security vulnerabilities and performance issues",
    apiCollabTitle: "API Design Platform",
    apiCollabDesc: "Real-time collaborative API design platform, supporting OpenAPI 3.1 specifications",
    viewDetails: "View Details",
    interactiveLoopTitle: "Interactive Development Loop",
    interactiveLoopSubtitle: "Celadon is more than a code generator. It uses a unique Clarify → PRD → Dev → Iterate loop to ensure every line of code aligns with your intent.",
    loopItem1: "AI-assisted Alignment",
    loopItem2: "Auto-standardized PRD",
    loopItem3: "Closed-loop AI Coding",
    loopItem4: "One-click Preview & Deploy",
    processClarify: "Clarification",
    processPrd: "PRD Generation",
    processDev: "AI Development",
    processDeploy: "One-click Deploy",
    processIterate: "Continuous Iteration",
    inputPlaceholder1: "A backend system for managing SaaS subscriptions...",
    inputPlaceholder2: "An AI tool for automated security code review...",
    inputPlaceholder3: "A collaborative API design platform for OpenAPI...",
    inputPlaceholder4: "An engineer's tool for tech debt tracking & refactoring...",
    submitHint: " Submit",
    charCount: "chars",
    startingBtn: "Starting...",
    startBtn: "Start",
    coreEngine: "The Core Engine",

    // Mock Data
    mockLogReadPrd: "Read PRD, identified 12 functional modules...",
    mockLogTaskSplit: "Task breakdown: [schema] [auth] [api] [stripe] [dashboard]",
    mockLogSchemaInit: "schema.prisma initialized",
    mockLogGeneratingModels: "Generating models: User, Subscription, Invoice, Plan...",
    mockLogSchemaWritten: "prisma/schema.prisma written (89 lines)",
    mockLogMigrateDone: "Migration complete: 20240118_init",
    mockLogAuthSystem: "Building NextAuth system + JWT strategy...",
    mockLogAuthWritten: "middleware/auth.ts written",
    mockLogAuthCheck: "Checking auth middleware; fixing missing rate limiting",
    mockLogSecurityWarn: "Security Alert: /api unprotected; adding middleware",
    mockLogRateLimitWritten: "middleware/rateLimit.ts written",
    mockLogStripeHandler: "Building Stripe webhook handler...",
    mockLogStripeWritten: "lib/stripe.ts written (156 lines)",
    mockLogBuildApi: "Building API routes: /subscriptions, /invoices, /plans...",
    mockLogApiFinish: "API layer finished; hand-off to Planner",
    mockLogPlanDashboard: "Planning Dashboard tree: BillingTable, RevenueChart...",
    mockLogBuildBilling: "Building BillingTable component (virtual scroll + sort)",
    mockLogBillingWritten: "components/BillingTable.tsx written (312 lines)",
    mockLogBuildChart: "Building RevenueChart (Recharts, daily/monthly views)...",
    mockLogChartWritten: "components/RevenueChart.tsx written (201 lines)",
    mockLogReflectorReview: "Reflector: missing empty state in BillingTable",
    mockLogEmptyStateAdded: "BillingTable empty state added",
    mockLogTsc: "Running TypeScript type check...",
    mockLogTscPass: "tsc --noEmit passed, 0 errors",
    mockLogEslint: "Running ESLint...",
    mockLogLintFix: "2 warnings (unused import); auto-fixed",
    mockLogLintDone: "Lint passed, quality check complete",
    mockLogBuildSubCard: "Building SubscriptionCard component...",
    mockLogSubCardWritten: "components/SubscriptionCard.tsx written (134 lines)",
    mockLogIntegrateStripe: "Integrating Stripe billing cycle + webhook handler...",
    mockLogWebhookVerify: "Verified: webhook signature logic correct",
    mockLogExport: "Building export functionality (CSV / PDF)...",
    mockLogExportWritten: "lib/export.ts written (89 lines)",
    mockLogRunningTests: "Running integration tests...",
    mockLogTestsPass: "12/12 tests passed ✓",
    mockAgentPlanTask: "Planning Dashboard UI, assigning frontend tasks",
    mockAgentExecTask: "Building SubscriptionCard + CSV export",
    mockAgentReflectTask: "Waiting for Executor, preparing code review",
    mockAgentIdle: "Waiting for dev to start",
    mockDeployLogReadConfig: "Reading deploy config: deploy.config.ts...",
    mockDeployLogVercelConnect: "Connecting to Vercel project saas-billing-dashboard...",
    mockDeployLogAuthSuccess: "Auth successful, token valid",
    mockDeployLogNextBuild: "Next.js 14.2 building...",
    mockDeployLogCollect: "  ✦ Collecting pages and components...",
    mockDeployLogTscCheck: "  ✦ Running TypeScript type checking...",
    mockDeployLogTscPass: "  Type check passed, 0 errors",
    mockDeployLogBundle: "  ✦ Bundling JS modules (tree-shaking)...",
    mockDeployLogImages: "  ✦ Optimizing image assets...",
    mockDeployLogStatic: "  ✦ Generating static pages /dashboard, /billing, /settings...",
    mockDeployLogBuildSuccess: "Build success · took 23.4s · total 847 kB",
    mockDeployLogUpload: "Uploading artifacts to Vercel CDN...",
    mockDeployLogEdgeNodes: "Assigning edge nodes: sin1, nrt1, hkg1, sfo1...",
    mockDeployLogEdgeFinish: "Artifacts deployed to 4 edge nodes",
    mockDeployLogEnvInject: "Injecting Environment variables (Staging)...",
    mockDeployLogEnvFinish: "16 Environment variables injected",
    mockDeployLogDbMigrate: "Database migration complete (1 migration)",
    mockDeployLogHealth: "Running health checks...",
    mockDeployLogHealthPass: "All health checks passed (3/3)",
    mockDeployLogSsl: "SSL certificate issued (Let's Encrypt · 90 days)",
    mockDeployLogCdn: "CDN cache warm-up complete (12 nodes)",
    mockDeployLogSuccess: "Staging deploy success · https://staging-saas-billing.vercel.app",
    mockStepInstall: "Install Deps",
    mockStepTsc: "Type Check",
    mockStepLint: "Code Lint",
    mockStepBuild: "Build Bundle",
    mockStepUpload: "Upload CDN",
    mockStepMigrate: "DB Migrate",
    mockStepHealth: "Health Checks",
    mockStepSsl: "SSL Cert",
    mockStepCdn: "CDN Pre-warm",
    mockHcService: "Service Health",
    mockHcAuth: "Auth Service",
    mockHcSub: "Subscription API",
    mockHcDb: "Database Connection",
    filesCount: "files",
    linesCount: "lines",
    buildPipeline: "Build Pipeline",
    inProgress: "In Progress",
    commits: "commits",

    // Iterate Page
    iterateTitle: "Iterate",
    iterateSubtitle: "Manage versions and track feature evolution",
    startNewIterate: "Start New Iterate",
    currentVersion: "Current Version",
    previousVersion: "Previous Version",
    initialVersion: "Initial Version",
    versionHistory: "Version History",
    suggestedFeatures: "Suggested Features",
    reqCollected: "Requirements Collected",
    totalAdd: "Added",
    totalDel: "Deleted",
    feature: "Feature",
    perf: "Perf",
    ux: "UX",
    fix: "Fix",

    // More Mock Data
    mockLogIntegrateStripeTask: "Integrating Stripe billing cycle webhook events",
    mockLogReviewWebhook: "Reviewing webhook signature verification logic",
    mockLogWaitCommits: "Waiting for next batch of commits",
    mockLogAllTasksDone: "All tasks completed, waiting for deployment",
    mockLogEmptyTerminal: "Will display once development starts",
    mockLogV03Msg: "feat: SubscriptionCard + export lib/export.ts",
    mockIterateMsg: "[Iterate]",
    mockDefaultIdea: "SaaS Billing Dashboard",
    mockLogSslIssued: "Issued by Let's Encrypt",
    mockLogGlobalEdge: "Global edge node sync",
    codeChanges: "Code Changes",
    versionCompare: "Version Comparison",
    baseline: "Baseline",
    current: "Current",
    newFiles: "New Files",
    modifiedFiles: "Modified Files",
    commitCount: "Commit Count",
    nextRoundReqs: "Next Round Requirements",
    nextRoundSubtitle: "Describe new requirements or pick from AI suggestions, then launch a new loop",
    reqsRecorded: "Requirements Recorded",
    continueAdding: "Continue Adding",
    celadonSuggestions: "Celadon Suggestions",
    basedOnAnalysis: "Based on usage analysis",
    enterClarifyStage: "Enter Clarify Stage",
    startNewIterateLoop: "Launch New Iterate Loop",
    iterateCount: "Iterations",
    totalCommits: "Total Commits",
    onlineTime: "Online Time",
    mockLogNextReqPlaceholder: "e.g., users want a date range filter for billing and PDF export support...",
    mockLogConfirmReq: "Confirm",
    mockLogCmdEnterHint: "⌘+Enter to confirm",
    mockLogAdded: "Added",
    mockLogDeleted: "Deleted",
    mockLogFileChanges: "file changes",
    mockLogLive: "LIVE",
    mockLog2hAgo: "2h ago",
    mockLogYesterday: "yesterday",
    mockLogPdfExport: "PDF Export",
    mockLogPdfExportDesc: "Users requested PDF formatting for reimbursement scenarios",
    mockLogDarkMode: "Dark Mode Support",
    mockLogDarkModeDesc: "Theme switching for better long-term comfort",
    mockLogVirtualScroll: "Virtual Scrolling",
    mockLogVirtualScrollDesc: "Improve rendering performance for >1000 items with react-virtual",
    mockLogWebhookLog: "Webhook Event Logs",
    mockLogWebhookLogDesc: "Track and display all Stripe webhook events for debugging",
    mockLogStripeRefund: "Stripe Refund Handling",
    mockLogStripeRefundDesc: "Sync refund status to Invoice records by fixing the state machine",
  },
};

const STORAGE_KEY = "celadon-locale";

export function getStoredLocale(): Locale {
  try {
    const v = localStorage.getItem(STORAGE_KEY);
    if (v === "zh" || v === "en") return v;
  } catch { }
  return "zh";
}

export function setStoredLocale(locale: Locale): void {
  try {
    localStorage.setItem(STORAGE_KEY, locale);
  } catch { }
}

export function getT(locale: Locale): (key: string) => string {
  const m = messages[locale] ?? messages.zh;
  return (key: string) => m[key] ?? messages.zh[key] ?? key;
}

export { messages };
